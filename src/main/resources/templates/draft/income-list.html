<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
            name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Thymeleaf Form handling Demo</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css"
          rel="stylesheet">
</head>
<body class="container">
<form class="col card p-3 my-5" method="post" th:action="@{/edit}" th:object="${incomeDto}">
    <div class="form-group">
        <label for="description">Description</label>
        <input class="form-control" id="description" placeholder="Enter description" required autocomplete="off"
               th:value="*{description}"
               type="text"/>
    </div>
    <div class="form-group">
        <label for="description">Date</label>
        <input class="form-control" id="date" placeholder="Enter date" required autocomplete="off"
               th:value="*{date}"
               type="date"/>
    </div>
    <div class="form-group">
        <label for="amount">Amount</label>
        <input class="form-control" id="amount" placeholder="Enter amount" required  autocomplete="off"
               th:field="*{amount}"
               type="number"/>
    </div>
    <div>
        <input class="btn btn-primary" type="submit" value="Create Income">
        <input class="btn btn-primary" type="submit" value="Create1 Income" onclick="window.location.href='/edit'">
        <input class="btn btn-dark" type="reset" value="Reset">
    </div>
</form>


<div th:if="${incomePage.totalPages > 0}" class="pagination"
     th:each="pageNumber : ${totalPages}">
    <a th:href="@{/x/income/list(pageSize=${incomePage.size}, pageNumber=${pageNumber})}"
       th:text=${pageNumber}
       th:class="${pageNumber==incomePage.number + 1} ? active"></a>
</div>

<nav aria-label="Pagination" th:if="${totalPages > 0}">
    <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
            <a th:replace="paging :: paging(1, '<<', 'First Page')"></a>
        </li>
        <li class="page-item font-weight-bold" th:classappend="${currentPage == 1} ? 'disabled'">
            <a th:replace="paging :: paging(${currentPage - 1}, 'Prev', 'Previous Page')"></a>
        </li>
        <li class="page-item disabled" th:if="${currentPage - 2 > 1}">
            <a class="page-link" href="#">...</a>
        </li>
        <li class="page-item" th:classappend="${page == currentPage} ? 'active'"
            th:each="page : ${#numbers.sequence(currentPage > 2 ? currentPage - 2 : 1, currentPage + 2 < totalPages ? currentPage + 2 : totalPages)}">
            <a th:replace="paging :: paging(${page}, ${page}, 'Page ' + ${page})"></a>
        </li>
        <li class="page-item disabled" th:if="${currentPage + 2 < totalPages}">
            <a class="page-link" href="#">...</a>
        </li>
        <li class="page-item font-weight-bold" th:classappend="${currentPage == totalPages} ? 'disabled'">
            <a th:replace="paging :: paging(${currentPage + 1},'Next', 'Next Page')"></a>
        </li>
        <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
            <a th:replace="paging :: paging(${totalPages}, '>>', 'Last Page')"></a>
        </li>
    </ul>
</nav>

<table class="table table-striped table-bordered ">
    <tr>
        <th>ID</th>
        <th>Date</th>
        <th>Description</th>
        <th>Amount</th>
        <th>Operation id</th>
        <th>Actions</th>
    </tr>
    <tr th:if="${#lists.isEmpty(incomeList)}">
        <td class="text-center" colspan="7">No Records found. Add some...!</td>
    </tr>
    <tr th:each="income : ${incomeList}">
        <td class="align-middle" th:text="${income.id}"></td>
        <td class="align-middle" th:text="${income.date}"></td>
        <td class="align-middle" th:text="${income.description}"></td>
        <td class="align-middle" th:text="${income.amount}"></td>
        <td class="align-middle" th:text="${income.operationId}"></td>
        <td class="align-middle text-center"><a class="btn btn-secondary" th:href="'/edit/' + ${income.id}">‚úè</a></td>
    </tr>
</table>

</body>
</html>